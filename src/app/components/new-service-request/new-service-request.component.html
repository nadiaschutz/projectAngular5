<div class="container">

 
  <div class="main-header">
    <h5>Service Request Form</h5>
    <h6>service request > new service request > {{clientGivenName + ' ' + clientFamilyName}}</h6>
  </div>
  
  
  
      <!-- try [for]="value.text"...
  and value.text has to be the id of the input element or what element you have there -->
  <form #serReqForm="ngForm">
      <section class="form-section">

          <div *ngFor="let question of questionsList; let i =index" class="col-12-custom">
            <div *ngIf="question.length > 1">
              <div *ngFor="let eachItem of question ; let x = index">
                <div *ngIf="eachItem['type']==='choice'">
                    <label>{{eachItem.text}}</label>
                    <select class="form-control border-bottom" name='{{eachItem.text}}'
                    (change)='checkingEnableWhen($event.target.value, i)'
                    [(ngModel)]="eachItem.answer">
                    <option [ngValue]="null"></option>
                    <option *ngFor="let object of eachItem['option']"
                                [value]='object.valueCoding.code'>
          
                      {{object.valueCoding.code}}
                    </option>
                  </select>
                </div>

                <div *ngIf="eachItem['type']==='text' && eachItem['enabled']">
                    <label>{{eachItem.text}}</label>
                    <textarea type="text"
                    [(ngModel)]="eachItem.answer"
                    name='{{eachItem.text}}' 
                    class="form-control" 
                    placeholder="type your text" rows="1" required
                    ></textarea>
                </div>

              </div>
            </div>
            <div *ngIf="question.length === 1">

                <div *ngIf="question[0]['type']==='choice'">
                    <label>{{question[0].text}}</label>
                    <select class="form-control border-bottom" name='{{question[0].text}}'
                    (change)='checkingEnableWhen($event.target.value, i)'
                    [(ngModel)]="question[0].answer">
                    <option [ngValue]="null"></option>
                    <option *ngFor="let object of question[0]['option']"
                                [value]='object.valueCoding.code'>
          
                      {{object.valueCoding.code}}
                    </option>
                  </select>
                </div>

                <div class="form-check" *ngIf="question[0].type==='boolean'">
                    <input class="form-check-input" type="checkbox" name="{{question[0].text}}"  value="" id="defaultCheck1"
                    [(ngModel)]="question[0].answer">
                    <label class="form-check-label"
                    for="defaultCheck1">
                        {{question[0].text}}
                    </label>
                </div>
        
                  <div class="form-group" *ngIf="question[0].type==='text'">
            
                    <label>{{question[0].text}}</label>
                    <textarea type="text"
                    [(ngModel)]="question[0].answer"
                    name='{{question[0].text}}' 
                    class="form-control" 
                    placeholder="type your text" rows="1" required></textarea>
                  </div>
          
          
                  <div class="form-group" *ngIf="question[0].type==='open-choice'">
            
                    <label>{{question[0].text}}</label>
                        <textarea type="text" 
                        [(ngModel)]="question[0].answer"
                        name='{{question[0].text}}'
                        class="form-control" 
                        placeholder="type your text" 
                        rows="1" required></textarea>
                  </div> 

            </div>
          </div>

      </section>

      <section *ngIf="dependents===true" class="form-section">

      
  
        <div *ngIf="dependents===true" class="col-12-custom">
            <div class='header'>
              <h6>Dependents</h6>
            </div>
            <div class="form-group col-6-custom">
                
                
                <div class="col-6-custom">
                 <label>Dependents</label>
                <textarea type="text" 
                    [(ngModel)]="dependentNumber"
                    name='dependentsNumber'
                    class="form-control" 
                    placeholder="0" 
                    rows="1" disabled></textarea>
                </div>
  
                <div class="col-6-custom">
                    <button class="btn special-button move-dwn" (click)='addDependent()'>
                      Add Dependent
                    </button>
                  </div>
  
            </div>
            
        </div>

      </section>

      <section class="form-section">
          <div class="table-list">

      
  
              <div class="col-12-custom">
                  <div class='header'>
                  <h6>documents</h6>
                </div>
                  <input type="file"  id="uploader" class="btn btn-secondary" (change)='addDocument($event)' placeholder="Add a document">
                    <div>
                        <table class="table">
                            <thead class="header-table">
                              <tr>
                                <th scope="col">#ID</th>
                                <th scope="col">Date</th>
                                <th scope="col">Document Name</th>
                                <th scope="col">Document Type</th>
                                <th scope="col">File Type</th>
                                <th scope="col">File Size</th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                          
                              </tr>
                            </thead>
                            <tbody class="body-table">
                              
                              <tr *ngIf="documents">
                                <td>{{documents.id}}</td>
                                <td>{{documents.content[0].attachment.creation | date: 'dd/MM/yyyy'}}</td>
                                <td>{{documents.content[0].attachment.title }}</td>
                                <td>Medical Note</td>
                                <td>{{documents.content[0].attachment.contentType }}</td>
                                <td>{{documents.content[0].attachment.size }}</td>
          
                              </tr>
                           
                            </tbody>
                    
                    
                            <!-- <tbody *ngIf="documents !==null">
                              <tr *ngFor="let q of servRequests">
                                <td>{{q.resource.id}}</td>
                                <td>{{q.resource.authored | date: 'dd/MM/yyyy'}}</td>
                                <td>{{q}}</td>
                                <td>{{q}}</td>
                                <td>{{q}}</td>
                                <td>{{q}}</td>
                                <td>{{q.resource.subject.display}}</td>
                                <td>{{q.resource.status}}</td>
                              </tr>
                            </tbody> -->
                    
                    
                          </table>
                    </div>
          
                </div>
        </div>

      </section>
    
      
     <div class="button-section-line line">
      <button class="btn action-button float-right" type="button" (click)="onNext()">Next</button>
      <button class="btn regular-button" type="button" (click)="onSave()">Save</button>  
      <button class="btn regular-button" type="button" (click)="onCancel()">Cancel</button> 
    </div>
    </form>

    Angular/form: {{serReqForm.value | json }}
  

<!--   
    <br>
    <br>
    <br>
    
    Angular/form: {{serReqForm.value | json }}
    <br>
    <br>
    {{item | json }}
    <br>
    <br>
    
    {{items | json }}
    
    <br>
    <br>
    Model/qrequest: {{qrequest | json}}
     -->
    <!-- <button class="button button-primary" (click)="deserializethis(object.valueCoding.code)">Click me!</button> -->
  </div> 